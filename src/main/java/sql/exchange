
#推荐栏目sql
select
distinct g.id,g.title,g.bannerurl,g.price,g.oldprice,g.description,gcc.minprice
from
good g ,g_category gc,(SELECT min(price) as minprice,good_id  FROM goodchild group by good_id) gcc
where
gc.good_id=g.id and  gcc.good_id = g.id and gc.category_id in (SELECT id FROM goodcatogory WHERE  name=？)
and g.deleteCode = '001'


#首页新品推荐sql
select g.id ,g.title,g.hotimgurl,g.oldprice,gc.minprice,g.description,g.shortinfo
from good g,(SELECT min(price) as minprice,id cid,good_id gid FROM goodchild group by good_id) gc
where g.id = gc.gid and ishotCode ='001' and deleteCode = '001'


#估价重量查询单价和id
select * from diamond_calculation where 0.5>=start and 0.5<end and deletecode = '001'


#查询换款购物车选中个数
select count(1) as count  where  service_id = ? and checked = 0

# 预选合计 sql
select COALESCE(SUM(gc.exprice*ec.num),0)  from exchange_chart ec
left join goodchild gc on gc.id = ec.goodchild_id
where  ec.checked = 0 and ec.deleteCode = '001'  and  ec.service_id = ?


# 选款列表sql  免费换
select g.id,gc.exprice,gc.price,gc.id childId
from (SELECT min(exprice) as exprice,min(price) as price,id,good_id FROM goodchild group by good_id) as gc,good g
where g.id = gc.good_id
and  g.canchange = 0
and gc.exprice >= ?


# 选款列表sql  补差价
select g.id,gc.exprice,gc.price,gc.id childId
from (SELECT min(exprice) as exprice,min(price) as price,id,good_id FROM goodchild group by good_id) as gc,good g
where g.id = gc.good_id
and  g.canchange = 0
and gc.exprice <= ?
